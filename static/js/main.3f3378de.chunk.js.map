{"version":3,"sources":["utils/notify.js","utils/localStorage.js","constants/localStorageKeys.js","utils/reloadApp.js","utils/ajax.js","store/models/account.js","store/models/apiConf.js","store/models/auth.js","constants/routeFields.js","store/models/search.js","store/models/watchlist.js","store/index.js","utils/getYearFromDate.js","types/watchlist.js","assets/images/default-image.jpg","pages/home/comps/SearchInput/SearchInput.js","pages/home/comps/SearchInput/index.js","utils/getImgUrl.js","pages/home/comps/SearchResultsList/ResultsList/ResultsList.js","utils/getLangByCode.js","pages/home/comps/SearchResultsList/ResultsList/index.js","pages/home/comps/SearchResultsList/Pagination/Pagination.js","pages/home/comps/SearchResultsList/Pagination/index.js","pages/home/comps/SearchResultsList/index.js","pages/home/index.js","pages/index.js","layouts/default/comps/Header.js","layouts/default/index.js","App.js","index.js","pages/watchlist/comps/WatchlistItemCard.js","pages/watchlist/index.js"],"names":["notify","msg","console","warn","window","alert","LS","localStorage","key","JSON","parse","getItem","e","val","setItem","stringify","removeItem","SESSION_ID","reloadApp","location","assign","href","split","ajax","req","baseURL","process","params","Object","objectSpread","defineProperty","sessionId","store","getState","auth","session_id","Nprogress","start","axios","then","res","done","data","catch","err","response","resData","concat","status_code","status_message","status","message","account","state","id","name","username","include_adult","iso_639_1","iso_3166_1","avatar","gravatar","hash","reducers","updateInfo","nextState","effects","syncInfo","_syncInfo","asyncToGenerator","regenerator_default","a","mark","_callee","info","wrap","_context","prev","next","url","sent","this","stop","apply","arguments","apiConf","images","base_url","secure_base_url","poster_sizes","backdrop_sizes","logo_sizes","profile_sizes","still_sizes","change_keys","updateConf","oldConf","conf","syncConf","_syncConf","updateSessionId","ensureAuthed","payload","rootState","queries","URLSearchParams","search","has","get","_fetchNewSessionId","Error","authNow","confirm","_fetchNewReqToken","_fetchNewReqToken2","_ref","reqToken","request_token","askForAuth","redirectUrl","_fetchNewSessionId2","_callee2","_ref2","_context2","method","_x","models_search","query","curPage","totalPage","isLoading","results","setState","_search","_ref$page","page","total_pages","goPrevPage","_ref3","_ref3$search","goNextPage","_ref4","_ref4$search","models_watchlist","updateWatchlist","syncWatchlist","_syncWatchlist","watchlist","total","push","toConsumableArray","_x2","add","_add","item","_upd","isWatched","_x3","_x4","rm","_rm","_callee3","_context3","filter","_x5","_x6","media_type","media_id","__webpack_require__","d","__webpack_exports__","dispatch","init","models","date","substr","prop_types__WEBPACK_IMPORTED_MODULE_0__","WatchListItemType","shape","poster_path","string","popularity","number","isRequired","backdrop_path","vote_average","overview","first_air_date","original_language","vote_count","arrayOf","module","exports","SearchInput","props","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","handleChange","evt","keywords","target","value","handleSubmit","preventDefault","onSearch","react_default","createElement","onSubmit","className","style","justifyContent","placeholder","onChange","required","type","React","Component","connect","getImgUrl","size","defaultImg","_store$getState$apiCo","baseUrl","availableSizes","includes","urljoin","columns","width","height","alt","src","getYearFromDate","code","ISO6391","getName","ResultsList","colSpan","length","_this$props","addToWatchList","rmFromWatchList","map","slicedToArray","field","formatter","find","aria-label","onClick","label","renderResultRows","renderNoResultsRow","Pagination","role","disabled","_ref$search","_ref2$search","SearchResultsList","SearchResultsList_ResultsList","SearchResultsList_Pagination","Home","Helmet","comps_SearchInput","comps_SearchResultsList","pages","title","path","exact","component","require","default","Header","toggleNavMenu","isNavMenuVisible","react_router_dom","to","data-target","aria-expanded","classNames","is-active","aria-hidden","routes","route","activeClassName","DefaultLayout","Header_Header","padding","children","App","basename","titleTemplate","content","layouts_default","react_router","t0","abrupt","Promise","all","ReactDOM","render","es","src_App","document","getElementById","WatchlistItemCard","handleRemove","onRemove","marginBottom","Watchlist","WatchlistItemCard_WatchlistItemCard"],"mappings":"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","file":"static/js/main.3f3378de.chunk.js","sourcesContent":["/**\n * Alternative: lightweight lib like notie, noty, etc\n * @param {string} msg\n */\nexport default function (msg) {\n  console.warn('[Notify]', msg)\n  window.alert(msg)\n}\n","/**\n  Refer to:\n    - https://michalzalecki.com/why-using-localStorage-directly-is-a-bad-idea\n    - https://github.com/tsironis/lockr\n */\nimport notify from './notify'\nconst LS = window.localStorage\n\nexport default {\n  get (key) {\n    try {\n      return JSON.parse(LS.getItem(key))\n    } catch (e) {\n      notify(e)\n      return null\n    }\n  },\n  set (key, val) {\n    try {\n      LS.setItem(key, JSON.stringify(val))\n    } catch (e) {\n      // exceeded the quota, etc\n      notify(e)\n    }\n  },\n  rm (key) {\n    LS.removeItem(key)\n  }\n}\n","export const SESSION_ID = '__TMDB_SESSION_ID__'\n","import LS from './localStorage'\nimport { SESSION_ID } from '~/constants/localStorageKeys'\n\nexport default function () {\n  LS.rm(SESSION_ID)\n\n  const { location } = window\n  location.assign(location.href.split('?')[0])\n}\n","import axios from 'axios'\nimport Nprogress from 'nprogress'\nimport notify from './notify'\nimport reloadApp from './reloadApp'\nimport 'nprogress/nprogress.css'\n\nimport store from '~/store/'\n\n/**\n * @param  {object} req - https://github.com/axios/axios#request-config\n * @return {Promise<any>}\n */\nexport default function ajax (req) {\n  req.baseURL = process.env.REACT_APP_API_BASE_URL\n\n  // https://developers.themoviedb.org/3/getting-started/authentication\n  req.params = {\n    [process.env.REACT_APP_API_KEY_FIELD]: process.env.REACT_APP_API_KEY_VALUE,\n    ...req.params\n  }\n  const { sessionId } = store.getState().auth\n  if (sessionId) req.params.session_id = sessionId\n\n  Nprogress.start()\n  return axios(req)\n    /** {object} res - https://github.com/axios/axios#response-schema */\n    .then(res => {\n      Nprogress.done()\n      return res.data\n    })\n    /** {object} err - https://github.com/axios/axios#handling-errors */\n    .catch(err => {\n      if (err.response) {\n        const res = err.response\n        const resData = res.data\n        notify(\n          typeof resData === 'string'\n            ? resData\n            : `[${resData.status_code}] ${resData.status_message}`\n        )\n        if (res.status === 401) {\n          reloadApp() // session denied, etc\n        }\n      } else {\n        notify(err.message)\n      }\n      Nprogress.done(true)\n      throw err\n    })\n}\n","// Doc: https://developers.themoviedb.org/3/account/get-account-details\nimport ajax from '~/utils/ajax'\n\nexport default {\n  state: {\n    id: null, // integer\n    name: '', // could be ''\n    username: '',\n    include_adult: false,\n    iso_639_1: '', // e.g. 'en'\n    iso_3166_1: '', // e.g. 'US'\n    avatar: { gravatar: { hash: '' } }\n  },\n  reducers: {\n    updateInfo (state, nextState) {\n      return nextState\n    }\n  },\n  effects: {\n    async syncInfo () {\n      const info = await ajax({ url: '/account' })\n      this.updateInfo(info)\n    }\n  }\n}\n","// Doc: https://developers.themoviedb.org/3/configuration/get-api-configuration\nimport ajax from '~/utils/ajax'\n\nexport default {\n  state: {\n    images: {\n      base_url: '', // e.g. 'http://image.tmdb.org/t/p/'\n      secure_base_url: '', // e.g. 'https://image.tmdb.org/t/p/'\n      poster_sizes: [/* e.g.\n        w92,\n        w154,\n        w185,\n        w342,\n        w500,\n        w780,\n        original\n      */],\n      backdrop_sizes: [],\n      logo_sizes: [],\n      profile_sizes: [],\n      still_sizes: []\n    },\n    change_keys: []\n  },\n  reducers: {\n    updateConf (oldConf, conf) {\n      return conf\n    }\n  },\n  effects: {\n    async syncConf () {\n      const conf = await ajax({ url: '/configuration' })\n      this.updateConf(conf)\n    }\n  }\n}\n","// Doc: https://developers.themoviedb.org/3/authentication\nimport ajax from '~/utils/ajax'\nimport notify from '~/utils/notify'\nimport LS from '~/utils/localStorage'\nimport { SESSION_ID } from '~/constants/localStorageKeys'\nimport { QUERY__OAUTH_REQUEST_TOKEN, QUERY__OAUTH_IS_APPROVED } from '~/constants/routeFields'\n\nexport default {\n  state: {\n    sessionId: LS.get(SESSION_ID)\n  },\n  reducers: {\n    updateSessionId (state, sessionId) {\n      LS.set(SESSION_ID, sessionId) // can be reused after reload\n      return { sessionId }\n    }\n  },\n  effects: {\n    ensureAuthed (payload, rootState) { // call this func before mounting app\n      if (rootState.auth.sessionId) { // authed\n        // TODO: how to check if the session_id is valid?\n        // https://www.themoviedb.org/talk/5ae4abc80e0a266b9e00aa4a\n        return\n      }\n      const queries = new URLSearchParams(window.location.search)\n      if (queries.has(QUERY__OAUTH_REQUEST_TOKEN)) { // redirect from Doc: Step 2\n        if (queries.get(QUERY__OAUTH_IS_APPROVED) === 'true') {\n          return this._fetchNewSessionId(queries.get(QUERY__OAUTH_REQUEST_TOKEN))\n        }\n        const msg = 'You did not authorize the app to access your TMDb account'\n        notify(msg)\n        throw new Error(msg)\n      }\n      throw new Error('Please call authNow to continue')\n    },\n    authNow () {\n      LS.rm(SESSION_ID) // force to renew session_id\n\n      if (window.confirm('You will be redirected to TMDb to approve the authorization')) {\n        return this._fetchNewReqToken()\n      }\n      notify('You cancelled the auth request, please refresh the page to retry')\n    },\n    async _fetchNewReqToken () { // Doc: Step 1\n      const { request_token: reqToken } = await ajax({ url: '/authentication/token/new' })\n      this.askForAuth(reqToken)\n    },\n    askForAuth (reqToken) { // Doc: Step 2\n      const { location } = window\n      const redirectUrl = location.href.split('?')[0] // TODO: dev - localhost, prod - Github Pages?\n      location.assign(`https://www.themoviedb.org/authenticate/${reqToken}?redirect_to=${redirectUrl}`)\n    },\n    async _fetchNewSessionId (reqToken) { // Doc: Step 3\n      const { session_id: sessionId } = await ajax({\n        method: 'post',\n        url: '/authentication/session/new',\n        data: { request_token: reqToken }\n      })\n      this.updateSessionId(sessionId)\n    }\n  }\n}\n","export const QUERY__OAUTH_REQUEST_TOKEN = 'request_token'\n\nexport const QUERY__OAUTH_IS_APPROVED = 'approved'\n// export const QUERY__OAUTH_IS_DENIED = 'denied'\n","// Doc: https://developers.themoviedb.org/3/search/search-tv-shows\nimport ajax from '~/utils/ajax'\n\nexport default {\n  state: {\n    query: '',\n    curPage: null,\n    totalPage: null,\n    isLoading: false,\n    results: [] /* <~/types/watchlist/WatchListType> */\n  },\n  reducers: {\n    setState (state, nextState) {\n      return {\n        ...state,\n        ...nextState\n      }\n    }\n  },\n  effects: {\n    async search ({ query, page = 1 }) {\n      this.setState({ isLoading: true })\n      const { page: curPage, results, total_pages: totalPage } = await ajax({\n        url: '/search/tv',\n        params: { query, page }\n      })\n      this.setState({ query, curPage, totalPage, results, isLoading: false })\n    },\n    goPrevPage (payload, { search: { query, curPage } }) {\n      return this.search({ query, page: curPage - 1 })\n    },\n    goNextPage (payload, { search: { query, curPage } }) {\n      return this.search({ query, page: curPage + 1 })\n    }\n  }\n}\n","// Doc: https://developers.themoviedb.org/3/account/get-tv-show-watchlist\nimport ajax from '~/utils/ajax'\n\nexport default {\n  state: [], /* <~/types/watchlist/WatchListType> */\n  reducers: {\n    updateWatchlist (state, nextState) {\n      return nextState\n    }\n  },\n  effects: {\n    async syncWatchlist (payload, rootState) {\n      const watchlist = []\n      let curPage = 1\n      let totalPage = 1\n      while (curPage <= totalPage) { // TODO: using Promise.all concurrency\n        const { results, total_pages: total } = await ajax({\n          url: `/account/${rootState.account.id}/watchlist/tv`,\n          params: { page: curPage }\n        })\n        watchlist.push(...results)\n        totalPage = total\n        curPage += 1\n      }\n      this.updateWatchlist(watchlist)\n    },\n    async add (item, rootState) {\n      await this._upd({ id: item.id, isWatched: true })\n      this.updateWatchlist(\n        [...rootState.watchlist, item]\n      )\n    },\n    async rm (id, rootState) {\n      await this._upd({ id, isWatched: false })\n      this.updateWatchlist(\n        rootState.watchlist.filter(item => item.id !== id)\n      )\n    },\n    _upd ({ id, isWatched }, rootState) {\n      return ajax({\n        method: 'post',\n        url: `/account/${rootState.account.id}/watchlist`,\n        data: {\n          media_type: 'tv',\n          media_id: id,\n          watchlist: isWatched\n        }\n      })\n    }\n  }\n}\n","import { init } from '@rematch/core'\nimport * as models from './models/'\n\nconst store = init({\n  models\n})\n\nexport default store\nexport const { dispatch } = store\n","/**\n * @param {string|null} date - 'YYYY-MM-DD'|''\n * @return - 'YYYY'|'-'\n */\nexport default function (date) {\n  return date ? date.substr(0, 4) : '-'\n}\n","// Doc: https://developers.themoviedb.org/3/search/search-tv-shows\nimport { shape, arrayOf, number, string } from 'prop-types'\n\nexport const WatchListItemType = shape({\n  poster_path: string, // could be null\n  popularity: number.isRequired,\n  id: number.isRequired,\n  backdrop_path: string, // could be null\n  vote_average: number.isRequired,\n  overview: string.isRequired,\n  first_air_date: string, // 'YYYY-MM-DD', could be ''\n  // origin_country: array[string]\n  // genre_ids: array[integer]\n  original_language: string.isRequired,\n  vote_count: number.isRequired,\n  name: string.isRequired\n  // original_name: string\n})\n\nexport const WatchListType = arrayOf(WatchListItemType)\n","module.exports = \"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAYEBQUFBAYFBQUHBgYHCQ8KCQgICRMNDgsPFhMXFxYTFRUYGyMeGBohGhUVHikfISQlJygnGB0rLismLiMmJyb/2wBDAQYHBwkICRIKChImGRUZJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJib/wgARCAB3AHgDAREAAhEBAxEB/8QAGQABAQEBAQEAAAAAAAAAAAAAAAMCBAEI/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAPpgAAAAAAAAAAAAAAAGiooAAIETwAFTB4AeAAoeGAAWJlDqOc5wAUPDAALEyh1nOcwKGDZ4YABYmZPTwGjtMnMeGAAWJmQVMnUUBM5TAALEzJQ7DJI6ADhMAAsTB2mgSPCwOEwACxM6ygAIGyhwmAAVNmgAAZKHMYAB6egAAAGQAAAAAAAAAAAAAAAD/8QAKBAAAgEBBwMFAQEAAAAAAAAAAQIAAwQREjNRUnEQFCAhMTJBgWFQ/9oACAEBAAE/AP8AApoXa4ECdu24Tt33Cdu+4Tt33Cdu+4Tt33Cdu+4Ttn3Cdu26OMLFfGy5v5HJxt6n3l53GeurT13GXnUy86mXnUy86mUM0esrZr8+NlzY/wA25lmQMxJ+oAJaKYFzL40M1ZWzX58bLmx/m3MszBSVP30tLi7D+9aNM1DoBGUoSDKGasrZr8+NlzY/zbnpjfcetNC5uiKEW4SrTDqdZQzgJWzX58bLmx/m3PWhSxHE3tKlMo131KKYF/v31NMFw49xK+a/PjZc2P8ANuelGnjb+D3gAAuEqIHUqZRYoTSf8PhWzX58bLmx/m3MRS7YREQItw61qeNdGEoVMQKt6MOtfNfnxsubCCarAayjTFNf6ffxrUz80+QlGpjX+j36V81+fGzZv5BSqhyy4f2XWnVZdadVl1p1WXWnVZdadVl1o1WClWDFgVBiCviGMgiVs1+fEEjUTG24zG24zG24zG24zG24zG24zG24zG24zG+4/wCF/8QAFBEBAAAAAAAAAAAAAAAAAAAAcP/aAAgBAgEBPwBh/8QAFBEBAAAAAAAAAAAAAAAAAAAAcP/aAAgBAwEBPwBh/9k=\"","import React from 'react'\nimport PropTypes from 'prop-types'\n\nexport default class SearchInput extends React.Component {\n  static propTypes = {\n    query: PropTypes.string,\n    onSearch: PropTypes.func.isRequired\n  }\n\n  constructor (props) {\n    super(props)\n    this.state = {\n      keywords: props.query\n    }\n  }\n\n  handleChange = evt => {\n    this.setState({\n      keywords: evt.target.value\n    })\n  }\n\n  handleSubmit = evt => {\n    evt.preventDefault()\n    this.props.onSearch(this.state.keywords)\n  }\n\n  render () {\n    const { keywords } = this.state\n    return (\n      <form onSubmit={this.handleSubmit}>\n        <div className='field has-addons' style={{ justifyContent: 'flex-end' }}>\n          <div className='control has-icons-left'>\n            <span className='icon is-small is-left'>\n              <i className='fas fa-search'></i>\n            </span>\n            <input\n              className='input'\n              placeholder='Search TV Shows...'\n              onChange={this.handleChange}\n              value={keywords}\n              required\n            />\n          </div>\n          <div className='control'>\n            <button type='submit' className='button is-primary'>\n              Search\n            </button>\n          </div>\n        </div>\n      </form>\n    )\n  }\n}\n","import { connect } from 'react-redux'\nimport SearchInput from './SearchInput'\n\nconst mapStateToProps = rootState => ({\n  query: rootState.search.query\n})\n\nconst mapDispatchToProps = dispatch => ({\n  onSearch: query => dispatch.search.search({ query })\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SearchInput)\n","import urljoin from 'url-join'\nimport store from '~/store/'\n\nimport defaultImg from '~/assets/images/default-image.jpg'\n\n/**\n * Doc: https://developers.themoviedb.org/3/getting-started/images\n * @param  {string|null} url\n * @param  {'poster'|'backdrop'|'logo'|'profile'|'still'} type\n * @param  {string} [size] - e.g. 'w500'\n * @return {string}\n */\nexport default function (url, type, size) {\n  if (!url) {\n    return defaultImg\n  }\n\n  const {\n    images: {\n      secure_base_url: baseUrl,\n      [`${type}_sizes`]: availableSizes\n    }\n  } = store.getState().apiConf\n\n  if (size && !availableSizes.includes(size)) {\n    console.warn(`[${type}] ${size} is not in the available sizes: ${availableSizes}`)\n    size = null\n  }\n\n  return urljoin(baseUrl, size || availableSizes[0], url)\n}\n","import React from 'react'\nimport { func } from 'prop-types'\nimport { WatchListType } from '~/types/watchlist'\nimport getYearFromDate from '~/utils/getYearFromDate'\nimport getLangByCode from '~/utils/getLangByCode'\nimport getImgUrl from '~/utils/getImgUrl'\n\nconst columns = [\n  /* [label<string>, field<string>, formatter(val, row)<function?>] */\n  ['Cover', 'poster_path', (url, item) => ( // TODO: image lazyload\n    <img\n      style={{ width: '100px', height: '100px' }}\n      alt={item.name}\n      src={getImgUrl(url, 'poster')}\n    />\n  )],\n  ['Title', 'name'],\n  ['Year', 'first_air_date', getYearFromDate],\n  ['Rate', 'vote_average', val => val + '%'],\n  ['Lang', 'original_language', getLangByCode]\n]\n\nexport default class ResultsList extends React.Component {\n  static propTypes = {\n    results: WatchListType,\n    watchlist: WatchListType,\n    addToWatchList: func.isRequired,\n    rmFromWatchList: func.isRequired\n  }\n\n  renderNoResultsRow () {\n    return (\n      <tr>\n        <td\n          colSpan={columns.length + 1}\n          className='has-text-centered has-text-grey'>\n          (No results)\n        </td>\n      </tr>\n    )\n  }\n\n  renderResultRows () {\n    const { results, watchlist, addToWatchList, rmFromWatchList } = this.props\n    const isWatched = id => !!watchlist.find(item => item.id === id)\n    return results.map(item => (\n      <tr key={item.id}>\n        {\n          columns.map(([label, field, formatter]) => (\n            <td key={field}>\n              {\n                formatter\n                  ? formatter(item[field], item)\n                  : item[field]\n              }\n            </td>\n          ))\n        }\n        <td>\n          {\n            isWatched(item.id)\n              ? <button aria-label='remove from watchlist'\n                  className='button is-danger is-outlined'\n                  onClick={() => rmFromWatchList(item.id)}>\n                  <span className='icon is-small'>\n                    <i className='fas fa-trash'></i>\n                  </span>\n                </button>\n              : <button aria-label='add to watchlist'\n                  className='button is-link is-outlined'\n                  onClick={() => addToWatchList(item)}>\n                  <span className='icon is-small'>\n                    <i className='fas fa-plus'></i>\n                  </span>\n                </button>\n          }\n        </td>\n      </tr>\n    ))\n  }\n\n  render () {\n    const { results } = this.props\n    return (\n      <table className='table is-fullwidth'>\n        <thead>\n          <tr>\n            {\n              columns.map(([label, field]) => (\n                <td key={field}>{ label }</td>\n              ))\n            }\n            <td>Add / Remove Watchlist</td>\n          </tr>\n        </thead>\n        <tbody>\n          {\n            results.length\n              ? this.renderResultRows()\n              : this.renderNoResultsRow()\n          }\n        </tbody>\n      </table>\n    )\n  }\n}\n","import ISO6391 from 'iso-639-1'\n\n/**\n * @param  {string} code - e.g. 'en'|'ja'\n * @return {string} - e.g. 'English'|'Japanese'\n */\nexport default function (code) {\n  return ISO6391.getName(code)\n}\n","import { connect } from 'react-redux'\nimport ResultsList from './ResultsList'\n\nconst mapStateToProps = rootState => ({\n  watchlist: rootState.watchlist,\n  results: rootState.search.results\n})\n\nconst mapDispatchToProps = dispatch => ({\n  addToWatchList: item => dispatch.watchlist.add(item),\n  rmFromWatchList: id => dispatch.watchlist.rm(id)\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ResultsList)\n","import React from 'react'\nimport { number, func, bool } from 'prop-types'\n\nexport default class Pagination extends React.Component {\n  static propTypes = {\n    curPage: number,\n    totalPage: number,\n    isLoading: bool,\n    goPrevPage: func.isRequired,\n    goNextPage: func.isRequired\n  }\n\n  render () {\n    const { curPage, totalPage, isLoading, goPrevPage, goNextPage } = this.props\n    return (\n      <nav className='pagination is-centered' role='navigation' aria-label='pagination'>\n        <button className='button pagination-previous' onClick={goPrevPage}\n          disabled={isLoading || +curPage <= 1}>\n          Previous\n        </button>\n        <span className='pagination-list'>\n          { curPage } / { totalPage }\n        </span>\n        <button className='button pagination-next' onClick={goNextPage}\n          disabled={isLoading || curPage === totalPage}>\n          Next page\n        </button>\n      </nav>\n    )\n  }\n}\n","import { connect } from 'react-redux'\nimport Pagination from './Pagination'\n\nconst mapStateToProps = ({ search: { curPage, totalPage, isLoading } }) => ({\n  curPage,\n  totalPage,\n  isLoading\n})\n\nconst mapDispatchToProps = ({ search: { goPrevPage, goNextPage } }) => ({\n  goPrevPage,\n  goNextPage\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Pagination)\n","import React from 'react'\nimport ResultsList from './ResultsList/'\nimport Pagination from './Pagination/'\n\nconst SearchResultsList = () => (\n  <section>\n    <ResultsList />\n    <Pagination />\n  </section>\n)\n\nexport default SearchResultsList\n","import React from 'react'\nimport { Helmet } from 'react-helmet'\nimport SearchInput from './comps/SearchInput/'\nimport SearchResultsList from './comps/SearchResultsList/'\n\nconst Home = () => (\n  <section>\n    <Helmet>\n      <title>Home</title>\n    </Helmet>\n\n    <SearchInput />\n    <br />\n    <SearchResultsList />\n  </section>\n)\n\nexport default Home\n","export default [\n  {\n    title: 'Home',\n    path: '/',\n    exact: true,\n    component: require('./home/').default\n  },\n  {\n    title: 'Watch List',\n    path: '/watchlist',\n    component: require('./watchlist/').default\n  }\n]\n","/* eslint-disable  jsx-a11y/anchor-is-valid */\nimport React from 'react'\nimport classNames from 'classnames'\nimport { Link, NavLink } from 'react-router-dom'\nimport routes from '~/pages/'\n\nexport default class Header extends React.Component {\n  constructor (props) {\n    super(props)\n    this.state = {\n      isNavMenuVisible: false\n    }\n  }\n\n  toggleNavMenu = evt => {\n    evt.preventDefault()\n    this.setState({\n      isNavMenuVisible: !this.state.isNavMenuVisible\n    })\n  }\n\n  render () {\n    const { isNavMenuVisible } = this.state\n    return (\n      <header className='navbar has-shadow' role='navigation' aria-label='main navigation'>\n        <div className='container'>\n          <div className='navbar-brand'>\n            <Link to='/' className='navbar-item has-text-weight-bold'>\n              My TV Shows\n            </Link>\n            <a role='button' data-target='navMenu' aria-label='menu' aria-expanded='false'\n              className={classNames('navbar-burger', { 'is-active': isNavMenuVisible })}\n              onClick={this.toggleNavMenu}>\n              <span aria-hidden='true'></span>\n              <span aria-hidden='true'></span>\n              <span aria-hidden='true'></span>\n            </a>\n          </div>\n          <div id='navMenu' className={classNames('navbar-menu', { 'is-active': isNavMenuVisible })}>\n            <div className='navbar-start'>\n              {\n                routes.map(route => (\n                  <NavLink\n                    key={route.path}\n                    exact={route.exact}\n                    to={route.path}\n                    className='navbar-item'\n                    activeClassName='has-text-link'>\n                    { route.title }\n                  </NavLink>\n                ))\n              }\n            </div>\n          </div>\n        </div>\n      </header>\n    )\n  }\n}\n","import React from 'react'\nimport Header from './comps/Header'\n\nconst DefaultLayout = props => (\n  <div>\n    <Header />\n    <main className='container' style={{ padding: '2em 0' }}>\n      { props.children }\n    </main>\n  </div>\n)\n\nexport default DefaultLayout\n","import React from 'react'\nimport { Helmet } from 'react-helmet'\nimport { HashRouter as Router, Route } from 'react-router-dom'\n\nimport Layout from './layouts/default/'\nimport routes from './pages/'\n\nconst App = () => (\n  <Router basename={process.env.PUBLIC_URL}>\n    <Helmet titleTemplate='%s - My TV Shows'>\n      <meta name='description' content='A TMDb demo powered by React.js' />\n    </Helmet>\n    <Layout>\n      {\n        routes.map(route => (\n          <Route\n            key={route.path}\n            path={route.path}\n            exact={route.exact}\n            component={route.component}\n          />\n        ))\n      }\n    </Layout>\n  </Router>\n)\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { Provider } from 'react-redux'\nimport App from './App'\n\nimport store, { dispatch } from './store/'\n\n(async () => {\n  try {\n    await dispatch.auth.ensureAuthed()\n  } catch (e) {\n    dispatch.auth.authNow()\n    return\n  }\n  await Promise.all([\n    dispatch.account.syncInfo(),\n    dispatch.apiConf.syncConf()\n  ])\n  dispatch.watchlist.syncWatchlist()\n\n  ReactDOM.render(\n    <Provider store={store}>\n      <App />\n    </Provider>,\n    document.getElementById('root')\n  )\n})()\n","/* eslint-disable  jsx-a11y/anchor-is-valid */\nimport React from 'react'\nimport PropTypes from 'prop-types'\nimport { WatchListItemType } from '~/types/watchlist'\nimport getYearFromDate from '~/utils/getYearFromDate'\n\nexport default class WatchlistItemCard extends React.Component {\n  static propTypes = {\n    item: WatchListItemType,\n    onRemove: PropTypes.func.isRequired\n  }\n\n  handleRemove = evt => {\n    evt.preventDefault()\n    this.props.onRemove(this.props.item.id)\n  }\n\n  render () {\n    const { item } = this.props\n    return (\n      <div className='card' style={{ marginBottom: '1.5em' }}>\n        <header className='card-header'>\n          <p className='card-header-title'>\n            { item.name } ({ getYearFromDate(item.first_air_date) })\n          </p>\n          <a aria-label='remove from watchlist'\n            className='card-header-icon'\n            onClick={this.handleRemove}>\n            <span className='icon'>\n              <i className='fas fa-trash'></i>\n            </span>\n          </a>\n        </header>\n        <div className='card-content'>\n          <p className='content'>\n            { item.overview }\n          </p>\n        </div>\n      </div>\n    )\n  }\n}\n","import React from 'react'\nimport { Helmet } from 'react-helmet'\nimport { connect } from 'react-redux'\nimport { WatchListType } from '~/types/watchlist'\nimport WatchListItemCard from './comps/WatchlistItemCard'\n\nclass Watchlist extends React.Component {\n  static propTypes = {\n    watchlist: WatchListType\n  }\n\n  render () {\n    const { watchlist, rmFromWatchList } = this.props\n    return (\n      <section>\n        <Helmet>\n          <title>Watchlist</title>\n        </Helmet>\n        {\n          watchlist.map(item => (\n            <WatchListItemCard\n              key={item.id}\n              item={item}\n              onRemove={rmFromWatchList}\n            />\n          ))\n        }\n      </section>\n    )\n  }\n}\n\nconst mapState = state => ({\n  watchlist: state.watchlist\n})\nconst mapDispatch = dispatch => ({\n  rmFromWatchList: id => dispatch.watchlist.rm(id)\n})\nexport default connect(mapState, mapDispatch)(Watchlist)\n"],"sourceRoot":""}